this is the solution for bug1 written on bug1branch
