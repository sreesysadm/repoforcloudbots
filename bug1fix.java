written on masterbranch this is the solution for bug1
